# Schedule

---

## 스케줄러란 무엇인가?

스케줄러는 특정 작업을 정해진 시간에 자동으로 실행할 수 있도록 도와주는 도구입니다. 우리가 매일 해야 하는 반복 작업을 자동화하거나 정해진 시간에 특정 작업을 수행해야 할 때 유용합니다. 스케줄러는 운영체제 수준에서도 존재하지만, 파이썬과 같은 프로그래밍 언어를 이용해 구현할 수도 있습니다.

스케줄러를 사용하면 다음과 같은 이점이 있습니다:

- **자동화**: 반복적인 작업을 자동으로 실행하여 시간과 노력을 절약할 수 있습니다.
- **정확성**: 정해진 시간에 작업이 실행되기 때문에 사람이 직접 하는 것보다 오류를 줄일 수 있습니다.
- **효율성**: 반복적인 작업을 자동화하여 개발자가 더 중요한 작업에 집중할 수 있도록 도와줍니다.

## Python의 Schedule 모듈

Python의 `schedule` 모듈은 작업을 특정 시간에 실행하거나 반복적으로 실행하도록 예약하는 간단한 스케줄링 도구입니다. 직관적이고 사용하기 쉬운 API를 제공하여 작업의 실행 주기를 쉽게 정의할 수 있습니다. 이 모듈을 사용하면 정해진 시간에 반복 작업을 설정할 수 있기 때문에, 여러 작업을 자동으로 관리할 수 있습니다.

### Schedule 모듈 설치

`schedule` 모듈을 사용하기 위해서는 먼저 설치해야 합니다. 다음 명령어를 사용하여 설치할 수 있습니다:

```bash
pip install schedule

```

### Schedule 모듈의 주요 함수

`schedule` 모듈은 작업을 예약하기 위한 여러 가지 메소드를 제공합니다:

- **`every()`**: 작업을 예약할 때 사용합니다. 뒤에 반복 주기를 명시합니다. 예를 들어 `every().day`는 매일 작업을 예약하는 것입니다.
- **`day.at(time)`**: 매일 특정 시간에 작업을 예약합니다. `time`은 `"HH:MM"` 형식의 문자열로 지정합니다.
- **`minute`, `hour`, `week`**: 분, 시간, 주 단위로 작업을 예약할 수 있습니다.
- **`do(job)`**: 예약된 작업을 실제로 수행할 함수(`job`)와 연결합니다.
- **`run_pending()`**: 예약된 작업을 확인하고 실행해야 할 작업이 있는 경우 이를 실행합니다.
- **`cancel_job(job)`**: 특정 작업을 취소합니다.

### Schedule 모듈 사용 예제

다음은 `schedule` 모듈을 사용하여 매일 특정 시간에 작업을 실행하는 간단한 예제입니다:

```python
import schedule
import time

def job():
    print("매일 오전 9시에 실행되는 작업입니다.")

# 매일 오전 9시에 작업 예약
schedule.every().day.at("09:00").do(job)

# 스케줄러 실행
while True:
    schedule.run_pending()
    time.sleep(60)  # 60초마다 대기

```

위 코드에서 `job()` 함수는 매일 오전 9시에 실행되도록 예약되어 있습니다. `while True` 루프에서 `schedule.run_pending()`을 호출하여 예약된 작업을 확인하고, 실행할 시간이 되면 작업을 실행합니다.

## 스케줄러 구현 시 주의사항

- **무한 루프 사용**: 스케줄러는 무한 루프(`while True`)로 계속 실행되어야 합니다. 따라서 장시간 실행되는 작업의 경우, 서버와 같은 환경에서 백그라운드로 실행하는 것이 좋습니다.
- **CPU 사용량 관리**: `time.sleep()`을 적절히 사용하여 CPU 사용량을 줄이는 것이 중요합니다. 예를 들어, `time.sleep(60)`을 사용하여 1분 간격으로 예약된 작업을 확인하면 불필요한 CPU 사용을 줄일 수 있습니다.
- **백그라운드 실행**: Linux의 경우, 스케줄러를 백그라운드에서 실행하려면 `nohup` 명령어를 사용하거나 `cron`을 이용하여 스크립트를 예약할 수 있습니다.